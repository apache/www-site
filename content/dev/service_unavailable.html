<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Service Unavailable</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }

        .container {
            text-align: center;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            max-width: 400px;
        }

        img {
            margin-bottom: 20px;
            max-width: 100%;
        }

        h3 {
            color: #333;
        }

        p {
            color: #666;
            margin-bottom: 20px;
            word-wrap: break-word;
        }

        a {
            color: #369;
            text-decoration: none;
            font-weight: bold;
        }

        a:hover {
            text-decoration: underline;
        }
    </style>
    <script>
        function displayError() {
            const getArg = key => {
                const querystring = window.location.search.substring(1);
                const elements = querystring.split('&');
                for (let element of elements) {
                    const [k, v] = element.split('=');
                    if (decodeURIComponent(k) === key) {
                        return decodeURIComponent(v);
                    }
                }
                return '';
            };

            const parseURL = url => {
                const a = document.createElement('a');
                a.href = url;
                return a.hostname;
            };

            const site = getArg('site') || parseURL(document.referrer) || window.location.hostname || "www.apache.org";
            const code = parseInt(getArg('code'));
            const notice = document.getElementById('notice');
            notice.innerHTML = "";

            const siteLink = document.createElement('a');
            siteLink.href = `https://${site}`;
            siteLink.style.color = '#369';
            siteLink.textContent = site;

            notice.innerHTML += "The site you requested, ";
            notice.appendChild(siteLink);
            notice.innerHTML += ", is currently ";

            let txt = "";

            let title;
            switch (code) {
                case 404:
                    txt = "unavailable. We apologize!";
                    title = "404 - Page not Found";
                    break;
                case 500:
                    txt = "unavailable due to an error on the backend server. We apologize!";
                    title = "500 - Internal Server Error";
                    break;
                case 502:
                    txt = "unavailable due to an invalid or missing response from the backend server. We apologize!";
                    title = "502 - Invalid or missing response from backend";
                    break;
                case 503:
                    txt = "unavailable due to ongoing maintenance.";
                    title = "503 - Service down for maintenance";
                    break;
                case 504:
                    txt = "unavailable due to a timeout between this server and a backend server. We apologize!";
                    title = "504 - Gateway timeout";
                    break;
                default:
                    txt = "unavailable. The Apache Infrastructure Team has been notified about the situation.";
                    break;
            }

            notice.innerHTML += txt;

            document.getElementById('title').textContent = title || "Unknown error";
        }
    </script>
</head>
<body onload="displayError();">
    <div class="container">
        <img src="images/service_unavailable.png" alt="Sad feather is sad...">
        <h3 id="title">Proxy Error</h3>
        <p id="notice">
            The service you requested is currently not available. Please check again later. We apologize for the inconvenience!
        </p>
        <p id="seealso">
            For more information, visit our <a href="http://status.apache.org">general status page</a> or check our <a href="https://www.twitter.com/infrabot">infrastructure twitter feed</a>.<br>
            You can make further inquiries by emailing <a href="mailto:users@infra.apache.org">users@infra.apache.org</a> or, for escalation, by following our <a href="https://infra.apache.org/infra-contact" target="_blank">contact guidelines</a>.<br><br>
            <i>For urgent matters, you will often find us on <a href="https://the-asf.slack.com">Slack</a> in the <b>#asfinfra</b> channel.</i><br>&nbsp;
        </p>
        <p>
            With regards,<br>
            <a href="/dev/infrastructure.html">The Apache Infrastructure Team</a>
        </p>
    </div>
</body>
</html>
